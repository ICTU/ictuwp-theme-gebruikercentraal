!function(e,n,a){e(".form-item--filter label").click(function(){var n=e(this).parent();n.find("input:checked").length?n.removeClass("is-active"):n.addClass("is-active")});e(".site-header");var t=n.querySelector(".nav-primary");const i=900,s=n.getElementById("mainnav"),r=n.querySelectorAll("li.menu-item-has-children");function d(n){n.matches?(e(".btn--toggle-menu").length&&e(".btn--toggle-menu").remove(),e(".nav-primary .menu-item-has-children").each(function(){e(this).find("a:first").attr("aria-expanded",!0),e(this).find("a:first").after('<button class="icon icon--arrow icon--small" aria-expanded="false" data-ol-has-click-handler aria-expanded="false"><span class="visuallyhidden">'+menustrings.showsubmenu+" "+e(this).find("a:first span").text()+"</span></button>"),e(this).find(".sub-menu").attr("aria-hidden",!0)}),e(".menu-primary > li.menu-item-has-children > a").mouseenter(function(){e(this).hasClass("open")||(e(".menu-primary").find(".open").removeClass("open"),e(".menu-primary").find('ul[aria-hidden="false"]').attr("aria-hidden","true"),e(this).parent().addClass("open").find(".sub-menu").attr("aria-hidden","false"),e(this).find("a:first-child").attr("aria-expanded","true"))}),e(".menu-primary > li.menu-item-has-children .sub-menu").mouseleave(function(){e(this).parent().removeClass("open"),e(this).attr("aria-hidden","true"),e(this).parent().find("a:first-child").attr("aria-expanded","false")}),e(".nav-primary .menu-item-has-children > button").click(function(){var n=e(this).parent(),a=e(".nav-primary .menu-item.open");n.hasClass("open")?n.hasClass("open")&&(e(this).attr("aria-expanded",!1).find("span").text(menustrings.showsubmenu+" "+n.find("a:first span").text()),n.removeClass("open").find(".sub-menu").attr("aria-hidden",!0),n.find(".sub-menu").addClass("visuallyhidden")):(a.length&&(a.removeClass("open").find(".sub-menu").attr("aria-hidden",!0),a.find("button").attr("aria-expanded",!1)),e(this).attr("aria-expanded",!0).find("span").text(menustrings.closesubmenu+" "+n.find("a:first span").text()),n.addClass("open").find(".sub-menu").attr("aria-hidden",!1),n.find(".sub-menu").removeClass("visuallyhidden"))})):function(){const n=e(".btn--toggle-menu");e("button.icon").length&&e("button.icon").remove(),e(".nav-primary .menu-item-has-children").each(function(){e(this).find(".sub-menu").removeAttr("aria-hidden")}),n.length||e(".site-header > .wrap").append('<button class="btn btn--toggle-menu" aria-haspopup="true" aria-controls="menu-primary" aria-expanded="false" aria-label="Open menu"><i>&#x2261;</i><span class="btn__text">Menu</span></button>'),e(".btn--toggle-menu").click(function(){e(this).hasClass("active")?e(this).find("i").html("&#x2261;"):e(this).find("i").html("&times;"),e("body").toggleClass("menu-open"),e(".nav-primary").toggleClass("show"),e(this).toggleClass("active")})}()}if(matchMedia&&t){var l=a.matchMedia("(min-width: 900px)");l.addListener(d),d(l)}function o(){var e=a.innerWidth;n.querySelectorAll(".menu-item-has-children");Array.prototype.forEach.call(r,function(n,a){if(n.classList.remove("open"),n.querySelector("a").setAttribute("aria-expanded","false"),e>i){var t=n.querySelector("button");t&&void 0!==t&&(t.setAttribute("aria-expanded","false"),t.classList.remove("open-list")),n.querySelector("ul.sub-menu").classList.add("visuallyhidden")}})}n.onkeydown=function(e){27==(e=e||a.event).keyCode&&o()},n.addEventListener("click",function(e){s===e.target||s.contains(e.target)?(console.log("Event is BINNEN totalmenu"),s.classList.add("hasfocus")):(o(),console.log("Event is BUITEN totalmenu"),s.classList.remove("hasfocus"))})}(jQuery,document,window);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdjLW1haW4uanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50Iiwid2luZG93IiwiY2xpY2siLCJmb3JtSXRlbSIsInRoaXMiLCJwYXJlbnQiLCJmaW5kIiwibGVuZ3RoIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsIm1haW5NZW51IiwicXVlcnlTZWxlY3RvciIsImJyZWFrcG9pbnRtZW51IiwidG90YWxNZW51RWxlbWVudCIsImdldEVsZW1lbnRCeUlkIiwibWVudUl0ZW1zIiwicXVlcnlTZWxlY3RvckFsbCIsIldpZHRoQ2hhbmdlIiwibXEiLCJtYXRjaGVzIiwicmVtb3ZlIiwiZWFjaCIsImF0dHIiLCJhZnRlciIsIm1lbnVzdHJpbmdzIiwic2hvd3N1Ym1lbnUiLCJ0ZXh0IiwibW91c2VlbnRlciIsImhhc0NsYXNzIiwibW91c2VsZWF2ZSIsIm1lbnVJdGVtIiwiY3VycmVudEFjdGl2ZSIsImNsb3Nlc3VibWVudSIsIm1lbnVCdG4iLCJyZW1vdmVBdHRyIiwiYXBwZW5kIiwiaHRtbCIsInRvZ2dsZUNsYXNzIiwibmF2TW9iaWxlIiwibWF0Y2hNZWRpYSIsImFkZExpc3RlbmVyIiwiY2xvc2VNZW51SXRlbXMiLCJ3aWR0aCIsImlubmVyV2lkdGgiLCJBcnJheSIsInByb3RvdHlwZSIsImZvckVhY2giLCJjYWxsIiwiZWwiLCJpIiwiY2xhc3NMaXN0Iiwic2V0QXR0cmlidXRlIiwiYnV0dG9uRXhpc3RzIiwiYWRkIiwib25rZXlkb3duIiwiZXZ0IiwiZXZlbnQiLCJrZXlDb2RlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsImNvbnRhaW5zIiwiY29uc29sZSIsImxvZyIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBV0EsRUFBR0MsRUFBVUMsR0FhTkYsRUFBRSw0QkFFUkcsTUFBTSxXQUVkLElBQUlDLEVBQVdKLEVBQUVLLE1BQU1DLFNBRW5CRixFQUFTRyxLQUFLLGlCQUFpQkMsT0FDL0JKLEVBQVNLLFlBQVksYUFFckJMLEVBQVNNLFNBQVMsZUFzQmJWLEVBQUUsZ0JBQWYsSUFDRVcsRUFBV1YsRUFBU1csY0FBYyxnQkFDcEMsTUFBTUMsRUFBaUIsSUFJakJDLEVBQW1CYixFQUFTYyxlQUFlLFdBRzNDQyxFQUFZZixFQUFTZ0IsaUJBQWlCLDZCQWtINUMsU0FBU0MsRUFBWUMsR0FFZkEsRUFBR0MsU0E5R0pwQixFQUFFLHFCQUFxQlEsUUFDeEJSLEVBQUUscUJBQXFCcUIsU0FJekJyQixFQUFFLHdDQUF3Q3NCLEtBQUssV0FFN0N0QixFQUFFSyxNQUFNRSxLQUFLLFdBQVdnQixLQUFLLGlCQUFpQixHQUc5Q3ZCLEVBQUVLLE1BQU1FLEtBQUssV0FBV2lCLE1BQU0sbUpBQ01DLFlBQVlDLFlBQWMsSUFBTTFCLEVBQUVLLE1BQU1FLEtBQUssZ0JBQWdCb0IsT0FBUyxvQkFHMUczQixFQUFFSyxNQUFNRSxLQUFLLGFBQWFnQixLQUFLLGVBQWUsS0FJaER2QixFQUFFLGlEQUFpRDRCLFdBQVcsV0FDdEQ1QixFQUFFSyxNQUFNd0IsU0FBUyxVQUVyQjdCLEVBQUUsaUJBQWlCTyxLQUFLLFNBQVNFLFlBQVksUUFDN0NULEVBQUUsaUJBQWlCTyxLQUFLLDJCQUEyQmdCLEtBQUssY0FBZSxRQUd2RXZCLEVBQUVLLE1BQU1DLFNBQVNJLFNBQVMsUUFBUUgsS0FBSyxhQUFhZ0IsS0FBSyxjQUFlLFNBQ3hFdkIsRUFBRUssTUFBTUUsS0FBSyxpQkFBaUJnQixLQUFLLGdCQUFpQixXQUt4RHZCLEVBQUUsdURBQXVEOEIsV0FBVyxXQUVsRTlCLEVBQUVLLE1BQU1DLFNBQVNHLFlBQVksUUFDN0JULEVBQUVLLE1BQU1rQixLQUFLLGNBQWUsUUFDNUJ2QixFQUFFSyxNQUFNQyxTQUFTQyxLQUFLLGlCQUFpQmdCLEtBQUssZ0JBQWlCLFdBSS9EdkIsRUFBRSxpREFBaURHLE1BQU0sV0FDdkQsSUFBSTRCLEVBQVcvQixFQUFFSyxNQUFNQyxTQUNuQjBCLEVBQWdCaEMsRUFBRSxnQ0FFaEIrQixFQUFTRixTQUFTLFFBYWJFLEVBQVNGLFNBQVMsVUFFM0I3QixFQUFFSyxNQUFNa0IsS0FBSyxpQkFBaUIsR0FBT2hCLEtBQUssUUFBUW9CLEtBQU1GLFlBQVlDLFlBQWMsSUFBTUssRUFBU3hCLEtBQUssZ0JBQWdCb0IsUUFDdEhJLEVBQVN0QixZQUFZLFFBQVFGLEtBQUssYUFBYWdCLEtBQUssZUFBZSxHQUNuRVEsRUFBU3hCLEtBQUssYUFBYUcsU0FBUyxvQkFmakNzQixFQUFjeEIsU0FFZndCLEVBQWN2QixZQUFZLFFBQVFGLEtBQUssYUFBYWdCLEtBQUssZUFBZSxHQUN4RVMsRUFBY3pCLEtBQUssVUFBVWdCLEtBQUssaUJBQWlCLElBR3JEdkIsRUFBRUssTUFBTWtCLEtBQUssaUJBQWlCLEdBQU1oQixLQUFLLFFBQVFvQixLQUFNRixZQUFZUSxhQUFlLElBQU1GLEVBQVN4QixLQUFLLGdCQUFnQm9CLFFBQ3RISSxFQUFTckIsU0FBUyxRQUFRSCxLQUFLLGFBQWFnQixLQUFLLGVBQWUsR0FDaEVRLEVBQVN4QixLQUFLLGFBQWFFLFlBQVksc0JBYzdDLFdBRUUsTUFBTXlCLEVBQVVsQyxFQUFFLHFCQUdmQSxFQUFFLGVBQWVRLFFBQ2xCUixFQUFFLGVBQWVxQixTQUduQnJCLEVBQUUsd0NBQXdDc0IsS0FBSyxXQUM3Q3RCLEVBQUVLLE1BQU1FLEtBQUssYUFBYTRCLFdBQVcsaUJBVWxDRCxFQUFjLFFBQ2pCbEMsRUFBRSx3QkFBd0JvQyxPQU4xQixtTUFTRnBDLEVBQUUscUJBQXFCRyxNQUFNLFdBQ3hCSCxFQUFFSyxNQUFNd0IsU0FBUyxVQUNsQjdCLEVBQUVLLE1BQU1FLEtBQUssS0FBSzhCLEtBQUssWUFFdkJyQyxFQUFFSyxNQUFNRSxLQUFLLEtBQUs4QixLQUFLLFdBRXpCckMsRUFBRSxRQUFRc0MsWUFBWSxhQUN0QnRDLEVBQUUsZ0JBQWdCc0MsWUFBWSxRQUM5QnRDLEVBQUVLLE1BQU1pQyxZQUFZLFlBbUJwQkMsR0FTSixHQUFJQyxZQUFjN0IsRUFBVSxDQUMxQixJQUFJUSxFQUFLakIsRUFBT3NDLFdBQVcsc0JBQzNCckIsRUFBR3NCLFlBQVl2QixHQUNmQSxFQUFZQyxHQU1kLFNBQVN1QixJQUVQLElBQUlDLEVBQVF6QyxFQUFPMEMsV0FDSDNDLEVBQVNnQixpQkFBaUIsMkJBRTFDNEIsTUFBTUMsVUFBVUMsUUFBUUMsS0FBS2hDLEVBQVcsU0FBVWlDLEVBQUlDLEdBSXBELEdBSEFELEVBQUdFLFVBQVU5QixPQUFPLFFBQ3BCNEIsRUFBR3JDLGNBQWMsS0FBS3dDLGFBQWEsZ0JBQWlCLFNBRWhEVCxFQUFROUIsRUFBZ0IsQ0FFMUIsSUFBSXdDLEVBQWVKLEVBQUdyQyxjQUFjLFVBRWhDeUMsUUFBdUMsSUFBaEJBLElBQ3pCQSxFQUFhRCxhQUFhLGdCQUFpQixTQUMzQ0MsRUFBYUYsVUFBVTlCLE9BQU8sY0FFaEM0QixFQUFHckMsY0FBYyxlQUFldUMsVUFBVUcsSUFBSSxxQkF1QnBEckQsRUFBU3NELFVBQVksU0FBVUMsR0FHVixLQURuQkEsRUFBTUEsR0FBT3RELEVBQU91RCxPQUNaQyxTQUVOaEIsS0FHSnpDLEVBQVMwRCxpQkFBaUIsUUFyQjFCLFNBQWdDRixHQUUxQjNDLElBQXFCMkMsRUFBTUcsUUFBVzlDLEVBQWlCK0MsU0FBU0osRUFBTUcsU0FNeEVFLFFBQVFDLElBQUksNkJBQ1pqRCxFQUFpQnFDLFVBQVVHLElBQUksY0FOL0JaLElBQ0FvQixRQUFRQyxJQUFJLDZCQUNaakQsRUFBaUJxQyxVQUFVOUIsT0FBTyxlQW5PdEMsQ0FzUEcyQyxPQUFRL0QsU0FBVUMiLCJzb3VyY2VzQ29udGVudCI6WyIvL1xuLy8gR2VicnVpa2VyIENlbnRyYWFsIC0gZmlsdGVycy5qc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gRnVuY3Rpb25hbGl0ZWl0IHZvb3IgaGV0IHRvZXZvZWdlbiB2YW4gZWVuIGFjdGl2ZSBjbGFzcyBhYW4gZmlsdGVyc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gQHBhY2thZ2UgZ2VicnVpa2VyLWNlbnRyYWFsXG4vLyBAYXV0aG9yICBUYW1hcmEgZGUgSGFhc1xuLy8gQGxpY2Vuc2UgR1BMLTIuMCtcbi8vIEB2ZXJzaW9uIDMuMTUuOVxuLy8gQGxpbmsgICAgaHR0cHM6Ly9naXRodWIuY29tL0lDVFUvaWN0dXdwLXRoZW1lLWdlYnJ1aWtlcmNlbnRyYWFsXG5cblxudmFyIGZpbHRlckxhYmVsID0gJCgnLmZvcm0taXRlbS0tZmlsdGVyIGxhYmVsJyk7XG5cbmZpbHRlckxhYmVsLmNsaWNrKGZ1bmN0aW9uICgpIHtcblxuICAgIHZhciBmb3JtSXRlbSA9ICQodGhpcykucGFyZW50KCk7XG5cbiAgICBpZiAoZm9ybUl0ZW0uZmluZCgnaW5wdXQ6Y2hlY2tlZCcpLmxlbmd0aCkge1xuICAgICAgICBmb3JtSXRlbS5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9ybUl0ZW0uYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgIH1cblxufSk7XG5cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8vXG4vLyBHZWJydWlrZXIgQ2VudHJhYWwgLSBtZW51LmpzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBGdW5jdGlvbmFsaXRlaXQgdm9vciB0b25lbiAvIHZlcmJlcmdlbiBtb2JpZWwgbWVudVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gQHBhY2thZ2UgZ2VicnVpa2VyLWNlbnRyYWFsXG4vLyBAYXV0aG9yICBUYW1hcmEgZGUgSGFhcywgUGF1bCB2YW4gQnV1cmVuXG4vLyBAbGljZW5zZSBHUEwtMi4wK1xuLy8gQHZlcnNpb24gMy4xNS45XG4vLyBAZGVzYy4gICBDVEEta2xldXJlbiwgYTExeSBncm9lbiwgc2hhcmluZyBidXR0b25zIG9wdGlvbmFsLCBiZWVsZGJhbmsgQ1BUIGNvZGUgc2VwYXJhdGlvbi5cbi8vIEBsaW5rICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9JQ1RVL2ljdHV3cC10aGVtZS1nZWJydWlrZXJjZW50cmFhbFxuXG5cbi8vIFZhcnNcbnZhciBoZWFkZXIgPSAkKCcuc2l0ZS1oZWFkZXInKSxcbiAgbWFpbk1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2LXByaW1hcnknKTtcbmNvbnN0IGJyZWFrcG9pbnRtZW51ID0gOTAwOyAvLyBvcCA5MDBweCB0b2dnbGUgdHVzc2VuIGRlc2t0b3AgLyBtb2JpZWxcblxuLy8gZGl0IGlzIGhldCBoZWxlIG1lbnUtb2JqZWN0LiBBbHMgQlVJVEVOIGRpdCBvYmplY3QgZ2VrbGlrdCB3b3JkdCwgZGFuIG1vZXRlbiBhbGxlXG4vLyBtZW51LWVsZW1lbnRlbiB3ZWVyIGluZ2VrbGFwdCB3b3JkZW5cbmNvbnN0IHRvdGFsTWVudUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1haW5uYXZcIik7XG5cbi8vIERpdCB6aWpuIGFsbGUgbWVudS1pdGVtcyBtZXQgZWVuIHN1Ym1lbnVcbmNvbnN0IG1lbnVJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJsaS5tZW51LWl0ZW0taGFzLWNoaWxkcmVuXCIpO1xuXG5cbmZ1bmN0aW9uIG5hdkRlc2t0b3AoKSB7XG5cbiAgLy8gUmVtb3ZlIG1lbnUgYnV0dG9uIGlmIHRoZXJlXG4gIGlmKCQoJy5idG4tLXRvZ2dsZS1tZW51JykubGVuZ3RoKXtcbiAgICAkKCcuYnRuLS10b2dnbGUtbWVudScpLnJlbW92ZSgpO1xuICB9XG5cbiAgLy8gQWRkIGJ1dHRvbnNcbiAgJCgnLm5hdi1wcmltYXJ5IC5tZW51LWl0ZW0taGFzLWNoaWxkcmVuJykuZWFjaChmdW5jdGlvbiAoKSB7XG5cbiAgICAkKHRoaXMpLmZpbmQoJ2E6Zmlyc3QnKS5hdHRyKCdhcmlhLWV4cGFuZGVkJywgdHJ1ZSk7XG5cbiAgICAvLyBBZGQgYSBidXR0b24gdG8gZWFjaCBsaW5rIHdpdGggYSBzdWJtZW51XG4gICAgJCh0aGlzKS5maW5kKCdhOmZpcnN0JykuYWZ0ZXIoJzxidXR0b24gY2xhc3M9XCJpY29uIGljb24tLWFycm93IGljb24tLXNtYWxsXCIgYXJpYS1leHBhbmRlZD1cImZhbHNlXCIgZGF0YS1vbC1oYXMtY2xpY2staGFuZGxlciBhcmlhLWV4cGFuZGVkPVwiZmFsc2VcIj4nICtcbiAgICAgICc8c3BhbiBjbGFzcz1cInZpc3VhbGx5aGlkZGVuXCI+JyArIG1lbnVzdHJpbmdzLnNob3dzdWJtZW51ICsgJyAnICsgJCh0aGlzKS5maW5kKCdhOmZpcnN0IHNwYW4nKS50ZXh0KCkgKyAnPC9zcGFuPicgK1xuICAgICAgJzwvYnV0dG9uPicpO1xuXG4gICAgJCh0aGlzKS5maW5kKCcuc3ViLW1lbnUnKS5hdHRyKCdhcmlhLWhpZGRlbicsIHRydWUpO1xuICB9KTtcblxuICAvLyBBZGQgY2xhc3Mgb24gbW91c2UgZW50ZXJcbiAgJCgnLm1lbnUtcHJpbWFyeSA+IGxpLm1lbnUtaXRlbS1oYXMtY2hpbGRyZW4gPiBhJykubW91c2VlbnRlcihmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCEoJCh0aGlzKS5oYXNDbGFzcygnb3BlbicpKSkge1xuICAgICAgLy8gVW5zZXQgb3RoZXIgYWN0aXZlIGlmIHRoZXJlXG4gICAgICAkKCcubWVudS1wcmltYXJ5JykuZmluZCgnLm9wZW4nKS5yZW1vdmVDbGFzcygnb3BlbicpO1xuICAgICAgJCgnLm1lbnUtcHJpbWFyeScpLmZpbmQoJ3VsW2FyaWEtaGlkZGVuPVwiZmFsc2VcIl0nKS5hdHRyKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG5cbiAgICAgIC8vIEFkZCBhdHRyaWJ1dGVzIHRvIGN1cnJlbnQgbWVudVxuICAgICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcygnb3BlbicpLmZpbmQoJy5zdWItbWVudScpLmF0dHIoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJyk7XG4gICAgICAkKHRoaXMpLmZpbmQoJ2E6Zmlyc3QtY2hpbGQnKS5hdHRyKCdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIEFuZCByZW1vdmUgYWdhaW4gb24gbW91c2VsZWF2ZVxuICAkKCcubWVudS1wcmltYXJ5ID4gbGkubWVudS1pdGVtLWhhcy1jaGlsZHJlbiAuc3ViLW1lbnUnKS5tb3VzZWxlYXZlKGZ1bmN0aW9uICgpIHtcbiAgICAvLyBBZGQgYXR0cmlidXRlcyB0byBjdXJyZW50IG1lbnVcbiAgICAkKHRoaXMpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCdvcGVuJyk7XG4gICAgJCh0aGlzKS5hdHRyKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG4gICAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCdhOmZpcnN0LWNoaWxkJykuYXR0cignYXJpYS1leHBhbmRlZCcsICdmYWxzZScpO1xuICB9KTtcblxuICAvLyBBZGQgdG9nZ2xlIGJlaGF2aW91ciBvbiBjbGlja1xuICAkKCcubmF2LXByaW1hcnkgLm1lbnUtaXRlbS1oYXMtY2hpbGRyZW4gPiBidXR0b24nKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG1lbnVJdGVtID0gJCh0aGlzKS5wYXJlbnQoKTtcbiAgICB2YXIgY3VycmVudEFjdGl2ZSA9ICQoJy5uYXYtcHJpbWFyeSAubWVudS1pdGVtLm9wZW4nKTtcblxuICAgIGlmICghKG1lbnVJdGVtLmhhc0NsYXNzKCdvcGVuJykpKSB7XG4gICAgICAvL1N1Ym1lbnUgaXMgY2xvc2VkLCBoYXMgdG8gb3BlblxuICAgICAgaWYoY3VycmVudEFjdGl2ZS5sZW5ndGgpe1xuICAgICAgICAvL0lmIHRoZXJlIGlzIGFub3RoZXIgaXRlbSBvcGVuIHJlbW92ZSBpdFxuICAgICAgICBjdXJyZW50QWN0aXZlLnJlbW92ZUNsYXNzKCdvcGVuJykuZmluZCgnLnN1Yi1tZW51JykuYXR0cignYXJpYS1oaWRkZW4nLCB0cnVlKTtcbiAgICAgICAgY3VycmVudEFjdGl2ZS5maW5kKCdidXR0b24nKS5hdHRyKCdhcmlhLWV4cGFuZGVkJywgZmFsc2UpO1xuICAgICAgfVxuXG4gICAgICAkKHRoaXMpLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCB0cnVlKS5maW5kKCdzcGFuJykudGV4dCggbWVudXN0cmluZ3MuY2xvc2VzdWJtZW51ICsgJyAnICsgbWVudUl0ZW0uZmluZCgnYTpmaXJzdCBzcGFuJykudGV4dCgpKTtcbiAgICAgIG1lbnVJdGVtLmFkZENsYXNzKCdvcGVuJykuZmluZCgnLnN1Yi1tZW51JykuYXR0cignYXJpYS1oaWRkZW4nLCBmYWxzZSk7XG4gICAgICBtZW51SXRlbS5maW5kKCcuc3ViLW1lbnUnKS5yZW1vdmVDbGFzcygndmlzdWFsbHloaWRkZW4nKTtcblxuXG4gICAgfSBlbHNlIGlmIChtZW51SXRlbS5oYXNDbGFzcygnb3BlbicpKSB7XG4gICAgICAvLyBTdWJtZW51IGlzIG9wZW4sIGhhcyB0byBjbG9zZVxuICAgICAgJCh0aGlzKS5hdHRyKCdhcmlhLWV4cGFuZGVkJywgZmFsc2UpLmZpbmQoJ3NwYW4nKS50ZXh0KCBtZW51c3RyaW5ncy5zaG93c3VibWVudSArICcgJyArIG1lbnVJdGVtLmZpbmQoJ2E6Zmlyc3Qgc3BhbicpLnRleHQoKSk7XG4gICAgICBtZW51SXRlbS5yZW1vdmVDbGFzcygnb3BlbicpLmZpbmQoJy5zdWItbWVudScpLmF0dHIoJ2FyaWEtaGlkZGVuJywgdHJ1ZSk7XG4gICAgICBtZW51SXRlbS5maW5kKCcuc3ViLW1lbnUnKS5hZGRDbGFzcygndmlzdWFsbHloaWRkZW4nKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vUmVtb3ZlIG9wZW5cbn1cblxuZnVuY3Rpb24gbmF2TW9iaWxlKCkge1xuXG4gIGNvbnN0IG1lbnVCdG4gPSAkKCcuYnRuLS10b2dnbGUtbWVudScpO1xuXG4gIC8vIFVuc2V0IGRlc2t0b3AgdGhpbmdzXG4gIGlmKCQoJ2J1dHRvbi5pY29uJykubGVuZ3RoKXtcbiAgICAkKCdidXR0b24uaWNvbicpLnJlbW92ZSgpO1xuICB9XG5cbiAgJCgnLm5hdi1wcmltYXJ5IC5tZW51LWl0ZW0taGFzLWNoaWxkcmVuJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgJCh0aGlzKS5maW5kKCcuc3ViLW1lbnUnKS5yZW1vdmVBdHRyKCdhcmlhLWhpZGRlbicpO1xuICB9KTtcblxuXG4gIGNvbnN0IG1lbnVCdG5IdG1sID1cbiAgICAnPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tLXRvZ2dsZS1tZW51XCIgJyArXG4gICAgJ2FyaWEtaGFzcG9wdXA9XCJ0cnVlXCIgYXJpYS1jb250cm9scz1cIm1lbnUtcHJpbWFyeVwiIGFyaWEtZXhwYW5kZWQ9XCJmYWxzZVwiIGFyaWEtbGFiZWw9XCJPcGVuIG1lbnVcIj4nICtcbiAgICAnPGk+JiN4MjI2MTs8L2k+PHNwYW4gY2xhc3M9XCJidG5fX3RleHRcIj5NZW51PC9zcGFuPicgK1xuICAgICc8L2J1dHRvbj4nO1xuXG4gIGlmKCEobWVudUJ0bi5sZW5ndGgpKSB7XG4gICAgJCgnLnNpdGUtaGVhZGVyID4gLndyYXAnKS5hcHBlbmQobWVudUJ0bkh0bWwpO1xuICB9XG5cbiAgJCgnLmJ0bi0tdG9nZ2xlLW1lbnUnKS5jbGljayhmdW5jdGlvbigpe1xuICAgIGlmKCQodGhpcykuaGFzQ2xhc3MoJ2FjdGl2ZScpKXtcbiAgICAgICQodGhpcykuZmluZCgnaScpLmh0bWwoJyYjeDIyNjE7Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICQodGhpcykuZmluZCgnaScpLmh0bWwoJyZ0aW1lczsnKTtcbiAgICB9XG4gICAgJCgnYm9keScpLnRvZ2dsZUNsYXNzKCdtZW51LW9wZW4nKTtcbiAgICAkKCcubmF2LXByaW1hcnknKS50b2dnbGVDbGFzcygnc2hvdycpO1xuICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICB9KTtcblxuXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vLyBtZWRpYSBxdWVyeSBjaGFuZ2VcbmZ1bmN0aW9uIFdpZHRoQ2hhbmdlKG1xKSB7XG5cbiAgaWYgKG1xLm1hdGNoZXMpIHtcbiAgICAvLyB3aW5kb3cgd2lkdGggaXMgYXQgbGVhc3QgODMwcHhcbiAgICAvLyBkb24ndCBzaG93IG1lbnUgYnV0dG9uXG4gICAgbmF2RGVza3RvcChkb2N1bWVudCwgd2luZG93KTtcbiAgfVxuICBlbHNlIHtcbiAgICAvLyB3aW5kb3cgd2lkdGggaXMgbGVzcyB0aGFuIDgzMHB4XG4gICAgLy8gRE8gc2hvdyBtZW51IGJ1dHRvblxuICAgIG5hdk1vYmlsZShkb2N1bWVudCwgd2luZG93KTtcblxuICB9XG5cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8vIG1lZGlhIHF1ZXJ5IGV2ZW50IGhhbmRsZXJcbmlmIChtYXRjaE1lZGlhICYmIG1haW5NZW51KSB7XG4gIHZhciBtcSA9IHdpbmRvdy5tYXRjaE1lZGlhKCcobWluLXdpZHRoOiA5MDBweCknKTtcbiAgbXEuYWRkTGlzdGVuZXIoV2lkdGhDaGFuZ2UpO1xuICBXaWR0aENoYW5nZShtcSk7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vLyBmdW5jdGllIG9tIGFsbGUgb3Blbmdla2xhcHRlIGl0ZW1zIGluIGhldCBtZW51IHdlZXIgdGUgc2x1aXRlblxuZnVuY3Rpb24gY2xvc2VNZW51SXRlbXMoKSB7XG5cbiAgdmFyIHdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gIHZhciBsaXN0aXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1lbnUtaXRlbS1oYXMtY2hpbGRyZW5cIik7XG5cbiAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChtZW51SXRlbXMsIGZ1bmN0aW9uIChlbCwgaSkge1xuICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoXCJvcGVuXCIpO1xuICAgIGVsLnF1ZXJ5U2VsZWN0b3IoJ2EnKS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCBcImZhbHNlXCIpO1xuXG4gICAgaWYgKHdpZHRoID4gYnJlYWtwb2ludG1lbnUpIHtcblxuICAgICAgdmFyIGJ1dHRvbkV4aXN0cyA9IGVsLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpO1xuXG4gICAgICBpZiAoYnV0dG9uRXhpc3RzICYmIHR5cGVvZiBidXR0b25FeGlzdHMgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgYnV0dG9uRXhpc3RzLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIFwiZmFsc2VcIik7XG4gICAgICAgIGJ1dHRvbkV4aXN0cy5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuLWxpc3QnKTtcbiAgICAgIH1cbiAgICAgIGVsLnF1ZXJ5U2VsZWN0b3IoJ3VsLnN1Yi1tZW51JykuY2xhc3NMaXN0LmFkZCgndmlzdWFsbHloaWRkZW4nKTtcblxuICAgIH1cblxuICB9KTtcbn1cblxuLy8gZnVuY3RpZSBvbSB0ZSBjaGVja2VuIG9mIGJpbm5lbiBvZiBidWl0ZW4gaGV0IG1lbnUgZXJnZW5zIG9wIGdla2xpa3Qgd29yZHQ7XG4vLyBhbHMgZXIgYnVpdGVuIGhldCBtZW51IGVyZ2VucyBvcCBnZWtsaWt0IHdvcmR0LCBkYW4gbW9ldGVuIGFsbGUgb3Blbmdla2xhcHRlIGl0ZW1zXG4vLyBpbiBoZXQgbWVudSB3ZWVyIHNsdWl0ZW5cbmZ1bmN0aW9uIGlzdG90YWxNZW51RWxlbWVudE1lbnUoZXZlbnQpIHtcblxuICBpZiAodG90YWxNZW51RWxlbWVudCAhPT0gZXZlbnQudGFyZ2V0ICYmICF0b3RhbE1lbnVFbGVtZW50LmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpIHtcbiAgICBjbG9zZU1lbnVJdGVtcygpO1xuICAgIGNvbnNvbGUubG9nKCdFdmVudCBpcyBCVUlURU4gdG90YWxtZW51Jyk7XG4gICAgdG90YWxNZW51RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdoYXNmb2N1cycpO1xuICB9XG4gIGVsc2Uge1xuICAgIGNvbnNvbGUubG9nKCdFdmVudCBpcyBCSU5ORU4gdG90YWxtZW51Jyk7XG4gICAgdG90YWxNZW51RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdoYXNmb2N1cycpO1xuICB9XG59XG5cbmRvY3VtZW50Lm9ua2V5ZG93biA9IGZ1bmN0aW9uIChldnQpIHtcbiAgLy8gbWVudS1pdGVtcyBvb2sgbGF0ZW4gc2x1aXRlbiBtZXQgRVNDLXRvZXRzXG4gIGV2dCA9IGV2dCB8fCB3aW5kb3cuZXZlbnQ7XG4gIGlmIChldnQua2V5Q29kZSA9PSAyNykge1xuICAgIC8vIGNsb3NlIHdpdGggRVNDXG4gICAgY2xvc2VNZW51SXRlbXMoKTtcbiAgfVxufTtcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaXN0b3RhbE1lbnVFbGVtZW50TWVudSk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuIl0sImZpbGUiOiJnYy1tYWluLW1pbi5qcyJ9
